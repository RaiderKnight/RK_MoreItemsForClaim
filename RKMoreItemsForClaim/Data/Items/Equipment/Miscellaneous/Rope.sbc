<?xml version="1.0" encoding="UTF-8"?>
<Definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  
  <!-- Basic rope -->
  <Definition xsi:type="MyObjectBuilder_HandItemDefinition">
    <Id Type="HandItem" Subtype="Rope" />
    
    <DisplayName>DisplayName_Rope_Basic</DisplayName>
    <Description>Description_Rope_Basic</Description>
    <Icon>Textures\GUI\Icons\cubes\BasicRope.dds</Icon>
    <Tag>Rope</Tag>
    <Size>
      <X>1.2</X>
      <Y>0.6</Y>
      <Z>0.3</Z>
    </Size>
    <Model>Models\Weapons\Rope.mwm</Model>

    <PhysicalMaterial>Rope</PhysicalMaterial>
    <Mass>5</Mass>

    <Animation>Rope</Animation>

    <MaxStackAmount>25</MaxStackAmount>

    <!-- Equipment -->
    <BearerDefinition Type="MyObjectBuilder_EntityEquipmentComponent" Subtype="Humanoid" />

    <MaxDurability>1</MaxDurability>

    <Position>
      <!--<Slot>OffHand</Slot>-->
      <Slot>MainHand</Slot>
    </Position>

    <EquippedTransform>
      <!-- tool rotation offset from hand -->
      <Position>
        <X>-0.015</X>
        <Y>0.02</Y>
        <Z>0</Z>
      </Position>
      <Orientation>
        <X>0.79335</X>
        <Y>0.60876</Y>
        <Z>0</Z>
        <W>0</W>
      </Orientation>
    </EquippedTransform>

    <Animation>Rope</Animation>

    <!-- extra transform on IK dummy in 1st person -->
    <EquippedTransform>
      <!-- tool rotation offset from hand -->
      <Orientation>
        <X>0</X>
        <Y>0</Y>
        <Z>0</Z>
        <W>1</W>
      </Orientation>
    </EquippedTransform>
    <EquippedTransformFps>
      <!-- hand IK target offset -->
      <Position>
        <X>0.817</X>
        <Y>-1.0</Y>
        <Z>-0.646</Z>
      </Position>
      <Orientation>
        <X>0.5215536</X>
        <Y>0.4426106</Y>
        <Z>-0.4053448</Z>
        <W>0.6064432</W>
      </Orientation>
    </EquippedTransformFps>

    <StanceToBehavior>
      <StanceName>NormalMode</StanceName>
      <BehaviorId Type="MyObjectBuilder_RopeToolBehaviorDefinition" Subtype="RopeNormal" />
    </StanceToBehavior>
  </Definition>

  <Definition xsi:type="MyObjectBuilder_RopeToolBehaviorDefinition">
    <Id Type="MyObjectBuilder_RopeToolBehaviorDefinition" Subtype="RopeNormal" />
    <Efficiency>2</Efficiency>
	<Cost Stat="Stamina" Cost="2.5" />

    <PrimaryEffect>
      <HitTime>0.25</HitTime>
      <AnimationTime>1</AnimationTime>
      <!--<SwingSound>ToolSwish</SwingSound>-->
      <Animation>RopeAttach</Animation>
    </PrimaryEffect>
    <SecondaryEffect>
      <HitTime>0</HitTime>
      <AnimationTime>1</AnimationTime>
      <!--<SwingSound>ToolSwish</SwingSound>-->
      <Animation>RopeDetach</Animation>
    </SecondaryEffect>
    <RopeDefinitionId Type="RopeConstraint" Subtype="BasicRope" />
    <RopeRemoveTimeMs>600</RopeRemoveTimeMs>
  </Definition>

  <!-- Tearable rope -->
  <Definition xsi:type="MyObjectBuilder_HandItemDefinition">
    <Id Type="HandItem" Subtype="RopeTearable" />
    
    <DisplayName>DisplayName_Rope_TearableRope</DisplayName>
    <Description>Description_Rope_TearableRope</Description>
    <Icon>Textures\GUI\Icons\cubes\TearableRope.dds</Icon>
    <Tag>Rope</Tag>
    <Size>
      <X>1.2</X>
      <Y>0.6</Y>
      <Z>0.3</Z>
    </Size>
    <Model>Models\Weapons\Rope.mwm</Model>

    <PhysicalMaterial>Rope</PhysicalMaterial>
    <Mass>5</Mass>
    <Animation>Rope</Animation>

    <MaxStackAmount>25</MaxStackAmount>

    <!-- Equipment -->
    <BearerDefinition Type="MyObjectBuilder_EntityEquipmentComponent" Subtype="Humanoid" />

    <MaxDurability>1</MaxDurability>

    <Position>
      <!--<Slot>OffHand</Slot>-->
      <Slot>MainHand</Slot>
    </Position>

    <EquippedTransform>
      <!-- tool rotation offset from hand -->
      <Position>
        <X>-0.015</X>
        <Y>0.02</Y>
        <Z>0</Z>
      </Position>
      <Orientation>
        <X>0.79335</X>
        <Y>0.60876</Y>
        <Z>0</Z>
        <W>0</W>
      </Orientation>
    </EquippedTransform>

    <Animation>Rope</Animation>

    <!-- extra transform on IK dummy in 1st person -->
    <EquippedTransform>
      <!-- tool rotation offset from hand -->
      <Orientation>
        <X>0</X>
        <Y>0</Y>
        <Z>0</Z>
        <W>1</W>
      </Orientation>
    </EquippedTransform>
    <EquippedTransformFps>
      <!-- hand IK target offset -->
      <Position>
        <X>0.817</X>
        <Y>-1.0</Y>
        <Z>-0.646</Z>
      </Position>
      <Orientation>
        <X>0.5215536</X>
        <Y>0.4426106</Y>
        <Z>-0.4053448</Z>
        <W>0.6064432</W>
      </Orientation>
    </EquippedTransformFps>

    <Animation>Rope</Animation>

    <StanceToBehavior>
      <StanceName>NormalMode</StanceName>
      <BehaviorId Type="MyObjectBuilder_RopeToolBehaviorDefinition" Subtype="RopeTearableNormal" />
    </StanceToBehavior>
  </Definition>

  <Definition xsi:type="MyObjectBuilder_RopeToolBehaviorDefinition">
    <Id Type="MyObjectBuilder_RopeToolBehaviorDefinition" Subtype="RopeTearableNormal" />
    <Efficiency>2</Efficiency>

    <PrimaryEffect>
      <HitTime>0.25</HitTime>
      <AnimationTime>1</AnimationTime>
      <!--<SwingSound>ToolSwish</SwingSound>-->
      <Animation>RopeAttach</Animation>
    </PrimaryEffect>
    <SecondaryEffect>
      <HitTime>0</HitTime>
      <AnimationTime>1</AnimationTime>
      <!--<SwingSound>ToolSwish</SwingSound>-->
      <Animation>RopeDetach</Animation>
    </SecondaryEffect>
    <RopeDefinitionId Type="RopeConstraint" Subtype="RayCastTearableRope" />
    <RopeRemoveTimeMs>1000</RopeRemoveTimeMs>
  </Definition>

  <!--
    Constraint Definitions
  -->

  <Definition xsi:type="MyObjectBuilder_RopeConstraintDefinition">
    <Id Type="RopeConstraint" Subtype="BasicRope" />

    <CopyFrom Type="BreakableConstraint" Subtype="BaseRope" />

    <EnableRayCastRelease>false</EnableRayCastRelease>
    <IsDefaultCreativeRope>true</IsDefaultCreativeRope>
    <ColorMetalTexture>Textures\Miscellaneous\rope_cm.dds</ColorMetalTexture>
    <NormalGlossTexture>Textures\Miscellaneous\rope_ng.dds</NormalGlossTexture>
    <AddMapsTexture>Textures\Miscellaneous\rope_add.dds</AddMapsTexture>
    <AttachSound>BlockRopeAttach</AttachSound>
    <DetachSound>BlockRopeDetach</DetachSound>
    <WindingSound>BlockRopeDrumUnwindLoop</WindingSound>

    <MaximumLength>120</MaximumLength>
  </Definition>
  
  <Definition xsi:type="MyObjectBuilder_RopeConstraintDefinition">
    <Id Type="RopeConstraint" Subtype="RayCastTearableRope" />

    <CopyFrom Type="BreakableConstraint" Subtype="BaseRope" />

    <EnableRayCastRelease>true</EnableRayCastRelease>
    <IsDefaultCreativeRope>false</IsDefaultCreativeRope>
    <ColorMetalTexture>Textures\Miscellaneous\rope_cm.dds</ColorMetalTexture>
    <NormalGlossTexture>Textures\Miscellaneous\rope_ng.dds</NormalGlossTexture>
    <AddMapsTexture>Textures\Miscellaneous\rope_add.dds</AddMapsTexture>
    <AttachSound>BlockRopeAttach</AttachSound>
    <DetachSound>BlockRopeDetach</DetachSound>
    <WindingSound>BlockRopeDrumUnwindLoop</WindingSound>

    <MaximumLength>120</MaximumLength>
  </Definition>

  <!--
    Crafting Definitions
  -->
  
  <Definition xsi:type="MyObjectBuilder_CraftingRecipeDefinition">
    <Id Type="MyObjectBuilder_CraftingRecipeDefinition" Subtype="BasicRope" />
    <DisplayName>DisplayName_Rope_Basic</DisplayName>
    <Description>Description_Rope_Basic</Description>
    <Icon>Textures\GUI\Icons\cubes\BasicRope.dds</Icon>
    <Category>Woodcrafting</Category>
    <Prerequisites>
      <Item Type="InventoryItem" Subtype="StringLinen" Amount="2" />
    </Prerequisites>
    <Results>
      <Item Amount="5" Type="HandItem" Subtype="Rope" />
    </Results>
    <CraftingTime Seconds="5" />
  </Definition>
  
  <Definition xsi:type="MyObjectBuilder_CraftingRecipeDefinition">
    <Id Type="MyObjectBuilder_CraftingRecipeDefinition" Subtype="PersonalRope" />
    <DisplayName>DisplayName_Rope_Basic</DisplayName>
    <Description>Description_Rope_Basic</Description>
    <Icon>Textures\GUI\Icons\cubes\BasicRope.dds</Icon>
    <Category>Personal</Category>
    <Prerequisites>
      <Item Type="InventoryItem" Subtype="StrawsFlax" Amount="5" />
    </Prerequisites>
    <Results>
      <Item Amount="1" Type="HandItem" Subtype="Rope" />
    </Results>
    <CraftingTime Seconds="10" />
  </Definition>
  
  <Definition xsi:type="MyObjectBuilder_CraftingRecipeDefinition">
    <Id Type="MyObjectBuilder_CraftingRecipeDefinition" Subtype="RopeTearable" />
    <DisplayName>DisplayName_Rope_TearableRope</DisplayName>
    <Description>Description_Rope_TearableRope</Description>
    <Icon>Textures\GUI\Icons\cubes\TearableRope.dds</Icon>
    <Category>Weaving</Category>
    <Prerequisites>
      <Item Type="InventoryItem" Subtype="StringLinen" Amount="2" />
    </Prerequisites>
    <Results>
      <Item Amount="5" Type="HandItem" Subtype="RopeTearable" />
    </Results>
    <CraftingTime Seconds="5" />
  </Definition>
</Definitions>